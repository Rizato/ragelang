{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Ragelang",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#keywords" },
    { "include": "#builtins" },
    { "include": "#operators" },
    { "include": "#foundation" },
    { "include": "#constants" },
    { "include": "#function-declaration" },
    { "include": "#enum-declaration" },
    { "include": "#punctuation" }
  ],
  "repository": {
    "comments": {
      "name": "comment.line.double-slash.ragelang",
      "match": "//.*$"
    },
    "strings": {
      "name": "string.quoted.double.ragelang",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.ragelang",
          "match": "\\\\."
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.hex.ragelang",
          "match": "\\b0x[0-9a-fA-F]+\\b"
        },
        {
          "name": "constant.numeric.binary.ragelang",
          "match": "\\b0b[01]+\\b"
        },
        {
          "name": "constant.numeric.float.ragelang",
          "match": "\\b\\d+\\.\\d+([eE][+-]?\\d+)?\\b"
        },
        {
          "name": "constant.numeric.scientific.ragelang",
          "match": "\\b\\d+[eE][+-]?\\d+\\b"
        },
        {
          "name": "constant.numeric.integer.ragelang",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.ragelang",
          "match": "\\b(if|else|loop|break|return|match)\\b"
        },
        {
          "name": "keyword.declaration.ragelang",
          "match": "\\b(fun|enum|prototype)\\b"
        },
        {
          "name": "keyword.special.ragelang",
          "match": "\\b(draw|update)\\b"
        },
        {
          "name": "keyword.operator.logical.ragelang",
          "match": "\\b(and|or)\\b"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.boolean.ragelang",
          "match": "\\b(true|false)\\b"
        },
        {
          "name": "variable.other.wildcard.ragelang",
          "match": "\\b_\\b"
        }
      ]
    },
    "builtins": {
      "patterns": [
        {
          "comment": "Drawing functions",
          "name": "support.function.drawing.ragelang",
          "match": "\\b(text|sprite|clear|rect|circle|line)\\b"
        },
        {
          "comment": "Math functions - basic",
          "name": "support.function.math.ragelang",
          "match": "\\b(abs|floor|ceil|round|min|max|sqrt|pow|sign)\\b"
        },
        {
          "comment": "Math functions - trigonometry",
          "name": "support.function.math.trig.ragelang",
          "match": "\\b(sin|cos|tan|asin|acos|atan|atan2|sinh|cosh|tanh)\\b"
        },
        {
          "comment": "Math constants",
          "name": "support.constant.math.ragelang",
          "match": "\\b(PI|TAU|E)\\b"
        },
        {
          "comment": "Math functions - angle conversion",
          "name": "support.function.math.angle.ragelang",
          "match": "\\b(deg|rad)\\b"
        },
        {
          "comment": "Math functions - logarithms",
          "name": "support.function.math.log.ragelang",
          "match": "\\b(log|log10|exp)\\b"
        },
        {
          "comment": "Random functions",
          "name": "support.function.random.ragelang",
          "match": "\\b(random|randomInt)\\b"
        },
        {
          "comment": "Utility functions",
          "name": "support.function.utility.ragelang",
          "match": "\\b(print|lerp|clamp|distance|rect_overlap|time)\\b"
        },
        {
          "comment": "Array functions",
          "name": "support.function.array.ragelang",
          "match": "\\b(array|len|push|pop|sort|sorted|reverse|reversed|slice|index|contains|insert|remove|extend|count|join)\\b"
        },
        {
          "comment": "Audio functions",
          "name": "support.function.audio.ragelang",
          "match": "\\b(music|stop_music|music_volume|sound|stop_sounds|master_volume)\\b"
        },
        {
          "comment": "Input functions - actions",
          "name": "support.function.input.action.ragelang",
          "match": "\\b(pressed|held|released)\\b"
        },
        {
          "comment": "Input functions - keyboard",
          "name": "support.function.input.keyboard.ragelang",
          "match": "\\b(key_pressed|key_held|key_released)\\b"
        },
        {
          "comment": "Input functions - mouse",
          "name": "support.function.input.mouse.ragelang",
          "match": "\\b(mouse_x|mouse_y|mouse_pressed|mouse_held|mouse_released)\\b"
        },
        {
          "comment": "Input functions - touch",
          "name": "support.function.input.touch.ragelang",
          "match": "\\b(touch_count|touch_x|touch_y)\\b"
        },
        {
          "comment": "Input buffer functions",
          "name": "support.function.input.buffer.ragelang",
          "match": "\\b(buffer_input|check_buffer|peek_buffer|clear_buffer|clear_all_buffers|buffer_time)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.assignment.ragelang",
          "match": "="
        },
        {
          "name": "keyword.operator.comparison.ragelang",
          "match": "(==|!=|<=|>=|<|>)"
        },
        {
          "name": "keyword.operator.arithmetic.ragelang",
          "match": "(\\+|-|\\*\\*|\\*|/|%)"
        },
        {
          "name": "keyword.operator.logical.ragelang",
          "match": "(&&|\\|\\||!)"
        },
        {
          "name": "keyword.operator.bitwise.ragelang",
          "match": "(<<|>>|&|\\||\\^|~)"
        },
        {
          "name": "keyword.operator.arrow.ragelang",
          "match": "=>"
        }
      ]
    },
    "foundation": {
      "name": "keyword.other.foundation.ragelang",
      "match": "^#{3,}$"
    },
    "function-declaration": {
      "match": "\\b(fun)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\(",
      "captures": {
        "1": { "name": "keyword.declaration.function.ragelang" },
        "2": { "name": "entity.name.function.ragelang" }
      }
    },
    "enum-declaration": {
      "match": "\\b(enum)\\s+([A-Z][a-zA-Z0-9_]*)\\s*\\{",
      "captures": {
        "1": { "name": "keyword.declaration.enum.ragelang" },
        "2": { "name": "entity.name.type.enum.ragelang" }
      }
    },
    "punctuation": {
      "patterns": [
        {
          "name": "punctuation.definition.block.ragelang",
          "match": "[{}]"
        },
        {
          "name": "punctuation.definition.array.ragelang",
          "match": "[\\[\\]]"
        },
        {
          "name": "punctuation.definition.parameters.ragelang",
          "match": "[()]"
        },
        {
          "name": "punctuation.separator.ragelang",
          "match": "[,;:]"
        },
        {
          "name": "punctuation.accessor.ragelang",
          "match": "\\."
        }
      ]
    }
  },
  "scopeName": "source.ragelang"
}
